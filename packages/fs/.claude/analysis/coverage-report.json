{
  "version": "2.0",
  "timestamp": "2025-12-23T04:15:00.000Z",
  "gitSha": "485409157d35945cf020e048b88aab95357996dc",
  "gitBranch": "optimize-action",
  "lastAnalyzedFiles": [
    "packages/fs/src/core.ts",
    "packages/fs/src/errors.ts",
    "packages/fs/src/index.ts",
    "packages/fs/src/types.ts",
    "packages/fs/src/testing/fixtures.ts",
    "packages/fs/src/testing/index.ts",
    "packages/fs/src/testing/mock-fs.ts",
    "packages/fs/src/utils/index.ts",
    "packages/fs/src/utils/path-utils.ts",
    "packages/fs/src/utils/sorting.ts"
  ],
  "projectType": {
    "language": "TypeScript",
    "framework": "Node.js",
    "testFramework": "Vitest"
  },
  "summary": {
    "behaviorsAnalyzed": 62,
    "fullyCovered": 38,
    "partiallyCovered": 8,
    "notCovered": 16,
    "qualityIssues": 2,
    "coveragePercent": 74
  },
  "gaps": [
    {
      "behavior": "MockFileSystem.readDir",
      "file": "src/testing/mock-fs.ts:N/A",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for MockFileSystem.readDir() - this mock is exported for consumer testing but lacks its own tests"
    },
    {
      "behavior": "MockFileSystem.copy",
      "file": "src/testing/mock-fs.ts:N/A",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for MockFileSystem copy operations - consumers rely on this for testing"
    },
    {
      "behavior": "MockFileSystem.move",
      "file": "src/testing/mock-fs.ts:N/A",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for MockFileSystem move operations - consumers rely on this for testing"
    },
    {
      "behavior": "MockFileSystem.stat",
      "file": "src/testing/mock-fs.ts:N/A",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "MockFileSystem has no stat method but is used in tests - verify behavior matches real FS"
    },
    {
      "behavior": "pathUtils.normalizePath",
      "file": "src/utils/path-utils.ts:73",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add unit tests for cross-platform path normalization - critical for Windows compat"
    },
    {
      "behavior": "pathUtils.createPath",
      "file": "src/utils/path-utils.ts:94",
      "risk": "low",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for createPath utility function"
    },
    {
      "behavior": "pathUtils.createTestPath",
      "file": "src/utils/path-utils.ts:114",
      "risk": "low",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for createTestPath utility"
    },
    {
      "behavior": "pathUtils.safeJoin",
      "file": "src/utils/path-utils.ts:172",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for safeJoin with mixed separators - important for cross-platform"
    },
    {
      "behavior": "pathUtils.createRelativePath",
      "file": "src/utils/path-utils.ts:221",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for relative path creation with error handling"
    },
    {
      "behavior": "pathUtils.isSafePath",
      "file": "src/utils/path-utils.ts:548",
      "risk": "high",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "SECURITY: Add tests for path traversal prevention - critical security behavior"
    },
    {
      "behavior": "pathUtils.isValidName",
      "file": "src/utils/path-utils.ts:572",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for filename validation"
    },
    {
      "behavior": "pathUtils.isAllowedPath",
      "file": "src/utils/path-utils.ts:596",
      "risk": "high",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "SECURITY: Add tests for allowed path restriction - security-critical"
    },
    {
      "behavior": "pathUtils.createPathRegex",
      "file": "src/utils/path-utils.ts:622",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for path pattern regex generation"
    },
    {
      "behavior": "pathUtils.pathMatchers.*",
      "file": "src/utils/path-utils.ts:648",
      "risk": "low",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for pathMatchers helper functions"
    },
    {
      "behavior": "pathUtils.pathAssertions.*",
      "file": "src/utils/path-utils.ts:765",
      "risk": "low",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for path assertion helpers"
    },
    {
      "behavior": "fixtures.performanceFixtures",
      "file": "src/testing/fixtures.ts:329",
      "risk": "low",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Consider adding tests for fixture generators if complex logic"
    },
    {
      "behavior": "core.readFile.customEncoding",
      "file": "src/core.ts:88",
      "risk": "low",
      "status": "partial",
      "testTypes": { "unit": true, "integration": false, "e2e": false },
      "suggestion": "Test with non-UTF8 encodings (latin1, utf16le) to verify encoding parameter"
    },
    {
      "behavior": "core.stat.symbolicLink",
      "file": "src/core.ts:194",
      "risk": "medium",
      "status": "partial",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add tests for symbolic link detection in stat()"
    },
    {
      "behavior": "core.copy.overwrite=false",
      "file": "src/core.ts:324",
      "risk": "medium",
      "status": "partial",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add test for copy() with overwrite:false option"
    },
    {
      "behavior": "core.move.crossDevice",
      "file": "src/core.ts:362",
      "risk": "medium",
      "status": "partial",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test move across different filesystems (may fail silently)"
    },
    {
      "behavior": "core.findFiles.ignore",
      "file": "src/core.ts:637",
      "risk": "low",
      "status": "partial",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add test for findFiles() with ignore patterns"
    },
    {
      "behavior": "core.emptyDir.nonExistent",
      "file": "src/core.ts:599",
      "risk": "low",
      "status": "partial",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test emptyDir() on non-existent directory"
    },
    {
      "behavior": "sorting.applySortingWithStats.warnings",
      "file": "src/utils/sorting.ts:112",
      "risk": "low",
      "status": "partial",
      "testTypes": { "unit": true, "integration": false, "e2e": false },
      "suggestion": "Verify console.warn output for stat failures is properly formatted"
    },
    {
      "behavior": "sorting.needsFileStats",
      "file": "src/utils/sorting.ts:96",
      "risk": "low",
      "status": "partial",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Add direct unit tests for needsFileStats() utility"
    }
  ],
  "qualityIssues": [
    {
      "file": "src/__tests__/index.test.ts",
      "issue": "no-assertions",
      "details": "Tests only check typeof === 'function', no actual behavior verification. Low-ROI tests per project guidelines."
    },
    {
      "file": "src/__tests__/sorting.test.ts:174",
      "issue": "documents-failure",
      "details": "Test explicitly documents that enrichWithStats throws on stat failure rather than handling gracefully. May be intentional but worth noting."
    }
  ],
  "coverageMatrix": [
    { "behavior": "core.readFile", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.writeFile", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.exists", "unit": true, "integration": true, "e2e": false, "risk": "low", "status": "covered" },
    { "behavior": "core.stat", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "partial" },
    { "behavior": "core.mkdir", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.readDir", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.copy", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "partial" },
    { "behavior": "core.move", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.remove", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.readJson", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.writeJson", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.ensureDir", "unit": true, "integration": true, "e2e": false, "risk": "low", "status": "covered" },
    { "behavior": "core.outputFile", "unit": true, "integration": true, "e2e": false, "risk": "low", "status": "covered" },
    { "behavior": "core.emptyDir", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "partial" },
    { "behavior": "core.findFiles", "unit": true, "integration": true, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "core.readIfExists", "unit": true, "integration": true, "e2e": false, "risk": "low", "status": "covered" },
    { "behavior": "core.copyIfExists", "unit": true, "integration": true, "e2e": false, "risk": "low", "status": "covered" },
    { "behavior": "errors.createFileSystemError", "unit": true, "integration": false, "e2e": false, "risk": "medium", "status": "covered" },
    { "behavior": "errors.mapNodeError", "unit": true, "integration": false, "e2e": false, "risk": "high", "status": "covered" },
    { "behavior": "sorting.sortFileEntries", "unit": true, "integration": false, "e2e": false, "risk": "low", "status": "covered" },
    { "behavior": "sorting.enrichWithStats", "unit": true, "integration": false, "e2e": false, "risk": "low", "status": "covered" },
    { "behavior": "pathUtils.*", "unit": false, "integration": false, "e2e": false, "risk": "medium", "status": "not-covered" },
    { "behavior": "MockFileSystem.*", "unit": false, "integration": false, "e2e": false, "risk": "medium", "status": "not-covered" },
    { "behavior": "fixtures.*", "unit": false, "integration": false, "e2e": false, "risk": "low", "status": "not-covered" }
  ],
  "resolved": [],
  "recommendations": {
    "immediate": [
      "HIGH PRIORITY: Add tests for pathUtils.isSafePath() and pathUtils.isAllowedPath() - these are security-critical path validation functions with zero test coverage",
      "Add tests for MockFileSystem class - consumers depend on this for their own tests, should verify mock behavior matches real filesystem"
    ],
    "shortTerm": [
      "Add path-utils.test.ts covering normalizePath, safeJoin, createRelativePath, createPathRegex",
      "Add symbolic link handling tests for stat()",
      "Test copy() with overwrite:false to ensure EEXIST is properly returned",
      "Consider removing or enhancing index.test.ts - current tests are low-ROI per project guidelines"
    ],
    "notes": [
      "Core filesystem operations (core.ts) have excellent behavioral coverage through integration tests",
      "Error mapping (errors.ts) has comprehensive unit test coverage for all Node.js error codes",
      "Sorting utilities are well-tested but applySortingWithStats warning behavior could use verification",
      "Testing utilities (mock-fs, fixtures, path-utils) are exported for consumer use but lack their own tests",
      "The testing/ module is primarily for consumer use - consider if self-testing is necessary or if integration tests elsewhere provide coverage"
    ]
  },
  "history": []
}
