import { describe, it, expect } from 'vitest'
import { createTestContext } from '@esteban-url/cli/testing'
import { versionCommand } from '../../commands/version.js'

describe('version command', () => {
  it('should be properly configured', () => {
    expect(versionCommand.name).toBe('version')
    expect(versionCommand.description).toBe('Show version information')
  })

  it('should output version when executed', async () => {
    const testContext = createTestContext()
    
    const result = await versionCommand.action({}, testContext)
    
    expect(result.isOk()).toBe(true)
    expect(testContext.logs).toContain('{{packageName}} version {{version}}')
  })

  it('should return ok result', async () => {
    const testContext = createTestContext()
    
    const result = await versionCommand.action({}, testContext)
    
    expect(result.isOk()).toBe(true)
    expect(result.value).toBeUndefined()
  })
})