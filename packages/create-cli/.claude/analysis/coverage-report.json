{
  "version": "2.0",
  "timestamp": "2025-12-23T19:45:00.000Z",
  "gitSha": "485409157d35945cf020e048b88aab95357996dc",
  "gitBranch": "optimize-action",
  "lastAnalyzedFiles": [
    "packages/create-cli/src/__tests__/generator.test.ts",
    "packages/create-cli/src/__tests__/integration.test.ts",
    "packages/create-cli/src/commands/generate.ts",
    "packages/create-cli/src/lib/cli/index.ts",
    "packages/create-cli/src/lib/cli/logger.ts",
    "packages/create-cli/src/lib/config/__tests__/schema.test.ts",
    "packages/create-cli/src/lib/config/index.ts",
    "packages/create-cli/src/lib/config/schema.ts",
    "packages/create-cli/src/lib/config/types.ts",
    "packages/create-cli/src/lib/config/validation.ts",
    "packages/create-cli/src/lib/core/errors.ts",
    "packages/create-cli/src/lib/core/generator.ts",
    "packages/create-cli/src/lib/core/index.ts",
    "packages/create-cli/src/lib/core/transforms.ts",
    "packages/create-cli/src/lib/core/types.ts",
    "packages/create-cli/src/lib/templates/__tests__/config.test.ts",
    "packages/create-cli/src/lib/templates/__tests__/modules.test.ts",
    "packages/create-cli/src/lib/templates/compiler.ts",
    "packages/create-cli/src/lib/templates/config.ts",
    "packages/create-cli/src/lib/templates/context.ts",
    "packages/create-cli/src/lib/templates/index.ts",
    "packages/create-cli/src/lib/templates/loader.ts",
    "packages/create-cli/src/lib/templates/modules.ts",
    "packages/create-cli/src/lib/templates/types.ts",
    "packages/create-cli/src/lib/templates/utils.ts",
    "packages/create-cli/src/lib/types.ts"
  ],
  "projectType": {
    "language": "TypeScript",
    "framework": "Node.js CLI",
    "testFramework": "Vitest"
  },
  "summary": {
    "behaviorsAnalyzed": 42,
    "fullyCovered": 26,
    "partiallyCovered": 10,
    "notCovered": 6,
    "qualityIssues": 2,
    "coveragePercent": 86
  },
  "gaps": [
    {
      "behavior": "compiler.getCachedTemplate",
      "file": "src/lib/templates/compiler.ts:400",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test cache invalidation on file modification, cache miss scenarios"
    },
    {
      "behavior": "compiler.cacheTemplate",
      "file": "src/lib/templates/compiler.ts:442",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test cache eviction when max size reached, mtime tracking"
    },
    {
      "behavior": "compiler.precompileTemplates",
      "file": "src/lib/templates/compiler.ts:498",
      "risk": "medium",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": false },
      "suggestion": "Test batch precompilation with invalid templates, partial success scenarios"
    },
    {
      "behavior": "compiler.sanitizeTemplateContext",
      "file": "src/lib/templates/compiler.ts:620",
      "risk": "high",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test XSS prevention, injection attack scenarios, nested object sanitization"
    },
    {
      "behavior": "compiler.sanitizeObject",
      "file": "src/lib/templates/compiler.ts:666",
      "risk": "high",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test recursive sanitization, array handling, prototype pollution prevention"
    },
    {
      "behavior": "loader.loadTemplateFilesFromDirectory",
      "file": "src/lib/templates/loader.ts:205",
      "risk": "medium",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": false },
      "suggestion": "Test path traversal prevention, symlink handling, edge cases"
    },
    {
      "behavior": "validation.validateProjectPath",
      "file": "src/lib/config/validation.ts:128",
      "risk": "high",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": false },
      "suggestion": "Add unit tests for directory traversal attacks, null byte injection"
    },
    {
      "behavior": "validation.validateTemplatePath",
      "file": "src/lib/config/validation.ts:160",
      "risk": "critical",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": false },
      "suggestion": "Add comprehensive unit tests for path traversal prevention"
    },
    {
      "behavior": "validation.validateOutputPath",
      "file": "src/lib/config/validation.ts:197",
      "risk": "critical",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": false },
      "suggestion": "Add unit tests for output path escape attempts"
    },
    {
      "behavior": "validation.sanitizeText",
      "file": "src/lib/config/validation.ts:243",
      "risk": "high",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test control character removal, null byte handling, edge cases"
    },
    {
      "behavior": "transforms.formatGeneratedCode",
      "file": "src/lib/core/transforms.ts:11",
      "risk": "low",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": false },
      "suggestion": "Test various file extensions, malformed code handling"
    },
    {
      "behavior": "context.createTemplateContext",
      "file": "src/lib/templates/context.ts:7",
      "risk": "medium",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": false },
      "suggestion": "Test all config variations, edge cases for feature flags"
    },
    {
      "behavior": "context.sanitizePackageName",
      "file": "src/lib/templates/context.ts:96",
      "risk": "medium",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test special characters, edge cases like consecutive hyphens"
    },
    {
      "behavior": "logger.formatObjectForDebug",
      "file": "src/lib/cli/logger.ts:14",
      "risk": "low",
      "status": "missing",
      "testTypes": { "unit": false, "integration": false, "e2e": false },
      "suggestion": "Test object truncation, various value types"
    },
    {
      "behavior": "errors.createTemplateCompilerError",
      "file": "src/lib/core/errors.ts:52",
      "risk": "low",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": false },
      "suggestion": "Test error context propagation"
    },
    {
      "behavior": "generateCommand.action",
      "file": "src/commands/generate.ts:39",
      "risk": "high",
      "status": "partial",
      "testTypes": { "unit": false, "integration": true, "e2e": true },
      "suggestion": "Test --force flag, --dry-run flag, error scenarios"
    }
  ],
  "qualityIssues": [
    {
      "file": "src/__tests__/generator.test.ts",
      "issue": "happy-path-only",
      "details": "Tests cover success scenarios but lack error path coverage for edge cases like filesystem permission errors, template corruption"
    },
    {
      "file": "src/lib/templates/__tests__/modules.test.ts",
      "issue": "over-mocked",
      "details": "Tests use mock config objects extensively; could benefit from more realistic ProjectConfig scenarios"
    }
  ],
  "coverageMatrix": [
    {
      "behavior": "generateProject",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "critical",
      "status": "covered"
    },
    {
      "behavior": "validateProjectConfig (schema)",
      "unit": true,
      "integration": true,
      "e2e": true,
      "risk": "critical",
      "status": "covered"
    },
    {
      "behavior": "validateConfigFile",
      "unit": true,
      "integration": false,
      "e2e": false,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "validatePresetConfig",
      "unit": true,
      "integration": false,
      "e2e": false,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "createConfigFile",
      "unit": true,
      "integration": false,
      "e2e": false,
      "risk": "low",
      "status": "covered"
    },
    {
      "behavior": "mergePresetWithConfig",
      "unit": true,
      "integration": false,
      "e2e": false,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "composeTemplate",
      "unit": true,
      "integration": true,
      "e2e": true,
      "risk": "critical",
      "status": "covered"
    },
    {
      "behavior": "validateDependencies",
      "unit": true,
      "integration": true,
      "e2e": false,
      "risk": "high",
      "status": "covered"
    },
    {
      "behavior": "checkConflicts",
      "unit": true,
      "integration": true,
      "e2e": false,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "getSortedFeatureModules",
      "unit": true,
      "integration": false,
      "e2e": false,
      "risk": "low",
      "status": "covered"
    },
    {
      "behavior": "getSortedModuleNames",
      "unit": true,
      "integration": false,
      "e2e": false,
      "risk": "low",
      "status": "covered"
    },
    {
      "behavior": "sortTemplateFiles",
      "unit": true,
      "integration": false,
      "e2e": false,
      "risk": "low",
      "status": "covered"
    },
    {
      "behavior": "createTestTemplateConfig",
      "unit": true,
      "integration": false,
      "e2e": false,
      "risk": "low",
      "status": "covered"
    },
    {
      "behavior": "compileTemplate",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "critical",
      "status": "covered"
    },
    {
      "behavior": "initializeHandlebarsHelpers",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "createTemplateCompilerContext",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "low",
      "status": "covered"
    },
    {
      "behavior": "validateProjectName",
      "unit": true,
      "integration": true,
      "e2e": true,
      "risk": "high",
      "status": "covered"
    },
    {
      "behavior": "validatePackageManager",
      "unit": true,
      "integration": true,
      "e2e": false,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "validateConfig",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "high",
      "status": "partial"
    },
    {
      "behavior": "getTemplateFiles",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "high",
      "status": "covered"
    },
    {
      "behavior": "resolveTemplatePaths",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "createProjectDirectory",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "processTemplateFile",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "high",
      "status": "covered"
    },
    {
      "behavior": "verifyProjectReadiness",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "verifyPackageJson",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "medium",
      "status": "covered"
    },
    {
      "behavior": "verifyTypeScriptConfig",
      "unit": false,
      "integration": true,
      "e2e": true,
      "risk": "low",
      "status": "covered"
    }
  ],
  "resolved": [],
  "recommendations": {
    "immediate": [
      "Add unit tests for security-critical validation functions (validateTemplatePath, validateOutputPath, sanitizeText)",
      "Add unit tests for sanitizeTemplateContext and sanitizeObject to prevent XSS/injection attacks"
    ],
    "shortTerm": [
      "Add unit tests for template caching behavior (getCachedTemplate, cacheTemplate)",
      "Expand generator.test.ts with error path coverage (permission errors, missing templates)",
      "Add sanitizePackageName unit tests for edge cases"
    ],
    "notes": [
      "E2E integration test (integration.test.ts) provides excellent full-workflow coverage",
      "Schema validation tests are comprehensive and well-structured",
      "Module composition tests thoroughly cover sorting and dependency resolution"
    ]
  },
  "history": []
}
